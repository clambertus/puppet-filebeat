### Filebeat configuration managed by Puppet ###

filebeat:
  spool_size: <%= @spool_size %>
  idle_timeout: <%= @idle_timeout %>
  registry_file: <%= @registry_file %>
  config_dir: <%= @config_dir %>

<%- if @tls -%>
tls:
<%= YAML.dump(@tls).gsub(/---|\s\n/, "---" => '', " \n" => "\n" ) -%>
<%- end -%>

<%- if @outputs -%>
output:
<%= YAML.dump(@outputs).gsub(/---|\s\n/, "---" => '', " \n" => "\n" ) -%>
<%- end -%>

<%- if @shipper and @shipper.length > 0 -%>
shipper:
<%= YAML.dump(@shipper).gsub(/---|\s\n/, "---" => '', " \n" => "\n" ) -%>
<%- end -%>

<%- if @logging and @logging.length > 0 -%>
logging:
<%= YAML.dump(@logging).gsub(/---|\s\n/, "---" => '', " \n" => "\n" ) -%>
<%- end -%>
